{"ast":null,"code":"import * as ClassicBuild from '@ckeditor/ckeditor5-build-classic';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"./foro.service\";\nconst _c0 = [\"chkAnswers\"];\nconst _c1 = [\"chkQuestions\"];\nexport let AppComponent = /*#__PURE__*/(() => {\n  class AppComponent {\n    constructor(foroService) {\n      this.foroService = foroService;\n      this.questions = [];\n      this.answers = [];\n      this.author_login = {\n        id: 0,\n        name: \"\",\n        url: \"\",\n        username: \"\",\n        password: \"\"\n      };\n      this.question = {\n        id: 0,\n        title: \"\",\n        detail: \"\",\n        author: this.author_login,\n        answers: [],\n        views: 0,\n        creationDate: new Date(),\n        idcorrectAnswer: 0\n      };\n      this.isLogin = false;\n      this.isValiduser = true;\n      this.isWrongCredentials = false;\n      this.Editor = ClassicBuild;\n      this.newQDet = \"\";\n    }\n\n    ngOnInit() {\n      var _a, _b, _c, _d;\n\n      (_b = (_a = this.edqueComponent) === null || _a === void 0 ? void 0 : _a.editorInstance) === null || _b === void 0 ? void 0 : _b.destroy();\n      (_d = (_c = this.edansComponent) === null || _c === void 0 ? void 0 : _c.editorInstance) === null || _d === void 0 ? void 0 : _d.destroy();\n      this.getQuestions();\n      this.isLogin = false; //this.getAuthor(\"CarlosRM7\",\"123456\");\n    }\n\n    onLogin(loginForm) {\n      this.getAuthor(loginForm.value[\"MLusername\"], loginForm.value[\"MLpassword\"]);\n      if (this.isLogin) loginForm.resetForm();\n    }\n\n    onLogout() {\n      this.isLogin = false;\n      this.author_login = {\n        id: 0,\n        name: \"\",\n        url: \"\",\n        username: \"\",\n        password: \"\"\n      };\n    }\n\n    getAuthor(pusername, ppwd) {\n      this.foroService.getAuthor(pusername, ppwd).subscribe(response => {\n        var _a;\n\n        this.author_login = response;\n\n        if (response.id === null) {\n          this.isWrongCredentials = true;\n        } else {\n          this.isWrongCredentials = false;\n          this.isLogin = true;\n          this.author_login.password = \"\";\n          (_a = document.getElementById('btn_login_cancel')) === null || _a === void 0 ? void 0 : _a.click();\n        }\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n    onRegister(registerForm) {\n      var author = {\n        id: 0,\n        name: registerForm.value[\"MRname\"],\n        username: registerForm.value[\"MRusername\"],\n        url: registerForm.value[\"MRurl\"],\n        password: registerForm.value[\"MRpassword\"]\n      };\n      this.foroService.createAuthor(author).subscribe(response => {\n        var _a;\n\n        this.author_login = response; //registerForm.resetForm();\n\n        (_a = document.getElementById('MRbtn_cancel')) === null || _a === void 0 ? void 0 : _a.click(); //alert(\"ID: \" + this.author_login.id + \" Nombre:\" + this.author_login.name + \" PWD:\" +this.author_login.password);\n\n        this.isLogin = true;\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n    getQuestions() {\n      //this.edansComponent?.editorInstance?.destroy();\n      this.foroService.getQuestions().subscribe(response => {\n        this.questions = response;\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n    onAddQuestion(newQuestionForm) {\n      var _a; //var det  = document.getElementById(\"threadDetail\")?.nodeValue;\n      //if (det?.length===)\n      //  det = \"\";\n\n\n      var questionDTO = {\n        detail: this.newQDet,\n        title: newQuestionForm.value[\"MnewTitle\"]\n      };\n\n      if (!this.author_login.id) {\n        alert(\"Debes loguearte primero\");\n        return;\n      }\n\n      (_a = document.getElementById('MBtnQClose')) === null || _a === void 0 ? void 0 : _a.click();\n      this.foroService.createQuestion(this.author_login.id, questionDTO).subscribe(response => {\n        console.log(response);\n        this.getQuestions();\n        newQuestionForm.resetForm();\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n    onAddAnswer(newAnswerForm) {\n      var answerDTO = {\n        detail: newAnswerForm.value[\"Mnewdetail\"],\n        idAuthor: this.author_login.id\n      };\n      this.foroService.createAnswer(this.question.id, answerDTO).subscribe(response => {\n        console.log(response);\n        this.updateCurrentQuestion();\n      }, error => {\n        alert(error.message);\n      });\n      newAnswerForm.resetForm();\n    }\n\n    onGetAnswers(question) {\n      //this.edqueComponent?.editorInstance?.destroy();\n      this.question = question;\n      this.foroService.updateQuestionViews(question.id).subscribe(response => {\n        console.log(response);\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n    onAddImpression(like_dislike, answer) {\n      var _a, _b;\n\n      if (!this.author_login.id) {\n        (_a = document.getElementById('Login_button')) === null || _a === void 0 ? void 0 : _a.click();\n        return;\n      }\n\n      if (this.searchPreviousVote(answer)) {\n        alert(`${this.author_login.username} You can't vote, you have already vote for this Answer`);\n        return;\n      }\n\n      this.foroService.updateAnswer(answer.id, this.author_login.id, like_dislike).subscribe(response => {\n        console.log(response);\n      }, error => {\n        alert(error.message);\n      });\n      alert(`${this.author_login.username} vote realized!`);\n      (_b = document.getElementById('MUbtn_submit')) === null || _b === void 0 ? void 0 : _b.click();\n    }\n\n    searchPreviousVote(answer) {\n      for (const lauthor of answer.authors_liked) {\n        if (lauthor.id === this.author_login.id) return true;\n      }\n\n      for (const lauthor of answer.authors_disliked) {\n        if (lauthor.id === this.author_login.id) return true;\n      }\n\n      return false;\n    }\n\n    updateCurrentQuestion() {\n      this.foroService.getQuestion(this.question.id).subscribe(response => {\n        console.log(response);\n        this.question = response;\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n    onSolveQuestion(answer) {\n      var _a;\n\n      this.foroService.updateQuestionAnsweredID(this.question.id, answer.id).subscribe(response => {\n        console.log(response);\n      }, error => {\n        alert(error.message);\n      });\n      alert(`${this.author_login.username} this question has been marked as SOLVED!`);\n      (_a = document.getElementById('MUbtn_submit')) === null || _a === void 0 ? void 0 : _a.click();\n    }\n\n    onUpdAnswer(updAnswerForm) {\n      this.updateCurrentQuestion();\n    }\n\n    searchQuestions(key) {\n      const results = [];\n\n      for (const lquestion of this.questions) {\n        if (lquestion.title.toLowerCase().indexOf(key.toLowerCase()) !== -1 || lquestion.detail.toLowerCase().indexOf(key.toLowerCase()) !== -1 //|| lquestion.author?.name?.toLowerCase().indexOf(key.toLowerCase())!== -1  \n        ) {\n          results.push(lquestion);\n        }\n      } //this.edqueComponent?.editorInstance?.destroy();\n\n\n      this.questions = results;\n      if (results.length === 0 || !key) this.getQuestions();\n    }\n\n    searchUser(key) {\n      this.isValiduser = true;\n      this.foroService.getAuthor(key, \"\").subscribe(response => {\n        this.author_login = response;\n        if (response.id === 1) this.isValiduser = false;\n      }, error => {\n        alert(error.message);\n      });\n    }\n\n  }\n\n  AppComponent.ɵfac = function AppComponent_Factory(t) {\n    return new (t || AppComponent)(i0.ɵɵdirectiveInject(i1.ForoService));\n  };\n\n  AppComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: AppComponent,\n    selectors: [[\"app-root\"]],\n    viewQuery: function AppComponent_Query(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵviewQuery(_c0, 5);\n        i0.ɵɵviewQuery(_c1, 5);\n      }\n\n      if (rf & 2) {\n        let _t;\n\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.edansComponent = _t.first);\n        i0.ɵɵqueryRefresh(_t = i0.ɵɵloadQuery()) && (ctx.edqueComponent = _t.first);\n      }\n    },\n    decls: 75,\n    vars: 0,\n    consts: [[\"rel\", \"stylesheet\", \"href\", \"https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css\", \"integrity\", \"sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=\", \"crossorigin\", \"anonymous\"], [1, \"col-md-10\"], [1, \"row\"], [1, \"col-xl-3\", \"col-lg-6\"], [1, \"card\", \"l-bg-cherry\"], [1, \"card-statistic-3\", \"p-4\"], [1, \"card-icon\", \"card-icon-large\"], [1, \"fas\", \"fa-shopping-cart\"], [1, \"mb-4\"], [1, \"card-title\", \"mb-0\"], [1, \"row\", \"align-items-center\", \"mb-2\", \"d-flex\"], [1, \"col-8\"], [1, \"d-flex\", \"align-items-center\", \"mb-0\"], [1, \"col-4\", \"text-right\"], [1, \"fa\", \"fa-arrow-up\"], [\"data-height\", \"8\", 1, \"progress\", \"mt-1\", 2, \"height\", \"8px\"], [\"role\", \"progressbar\", \"data-width\", \"25%\", \"aria-valuenow\", \"25\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"l-bg-cyan\", 2, \"width\", \"25%\"], [1, \"card\", \"l-bg-blue-dark\"], [1, \"fas\", \"fa-users\"], [\"role\", \"progressbar\", \"data-width\", \"25%\", \"aria-valuenow\", \"25\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"l-bg-green\", 2, \"width\", \"25%\"], [1, \"card\", \"l-bg-green-dark\"], [1, \"fas\", \"fa-ticket-alt\"], [\"role\", \"progressbar\", \"data-width\", \"25%\", \"aria-valuenow\", \"25\", \"aria-valuemin\", \"0\", \"aria-valuemax\", \"100\", 1, \"progress-bar\", \"l-bg-orange\", 2, \"width\", \"25%\"], [1, \"card\", \"l-bg-orange-dark\"], [1, \"fas\", \"fa-dollar-sign\"]],\n    template: function AppComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵelement(0, \"link\", 0);\n        i0.ɵɵelementStart(1, \"div\", 1);\n        i0.ɵɵelementStart(2, \"div\", 2);\n        i0.ɵɵelementStart(3, \"div\", 3);\n        i0.ɵɵelementStart(4, \"div\", 4);\n        i0.ɵɵelementStart(5, \"div\", 5);\n        i0.ɵɵelementStart(6, \"div\", 6);\n        i0.ɵɵelement(7, \"i\", 7);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(8, \"div\", 8);\n        i0.ɵɵelementStart(9, \"h5\", 9);\n        i0.ɵɵtext(10, \"New Orders\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(11, \"div\", 10);\n        i0.ɵɵelementStart(12, \"div\", 11);\n        i0.ɵɵelementStart(13, \"h2\", 12);\n        i0.ɵɵtext(14, \" 3,243 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(15, \"div\", 13);\n        i0.ɵɵelementStart(16, \"span\");\n        i0.ɵɵtext(17, \"12.5% \");\n        i0.ɵɵelement(18, \"i\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(19, \"div\", 15);\n        i0.ɵɵelement(20, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(21, \"div\", 3);\n        i0.ɵɵelementStart(22, \"div\", 17);\n        i0.ɵɵelementStart(23, \"div\", 5);\n        i0.ɵɵelementStart(24, \"div\", 6);\n        i0.ɵɵelement(25, \"i\", 18);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(26, \"div\", 8);\n        i0.ɵɵelementStart(27, \"h5\", 9);\n        i0.ɵɵtext(28, \"Customers\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(29, \"div\", 10);\n        i0.ɵɵelementStart(30, \"div\", 11);\n        i0.ɵɵelementStart(31, \"h2\", 12);\n        i0.ɵɵtext(32, \" 15.07k \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(33, \"div\", 13);\n        i0.ɵɵelementStart(34, \"span\");\n        i0.ɵɵtext(35, \"9.23% \");\n        i0.ɵɵelement(36, \"i\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(37, \"div\", 15);\n        i0.ɵɵelement(38, \"div\", 19);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(39, \"div\", 3);\n        i0.ɵɵelementStart(40, \"div\", 20);\n        i0.ɵɵelementStart(41, \"div\", 5);\n        i0.ɵɵelementStart(42, \"div\", 6);\n        i0.ɵɵelement(43, \"i\", 21);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(44, \"div\", 8);\n        i0.ɵɵelementStart(45, \"h5\", 9);\n        i0.ɵɵtext(46, \"Ticket Resolved\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(47, \"div\", 10);\n        i0.ɵɵelementStart(48, \"div\", 11);\n        i0.ɵɵelementStart(49, \"h2\", 12);\n        i0.ɵɵtext(50, \" 578 \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(51, \"div\", 13);\n        i0.ɵɵelementStart(52, \"span\");\n        i0.ɵɵtext(53, \"10% \");\n        i0.ɵɵelement(54, \"i\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(55, \"div\", 15);\n        i0.ɵɵelement(56, \"div\", 22);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(57, \"div\", 3);\n        i0.ɵɵelementStart(58, \"div\", 23);\n        i0.ɵɵelementStart(59, \"div\", 5);\n        i0.ɵɵelementStart(60, \"div\", 6);\n        i0.ɵɵelement(61, \"i\", 24);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(62, \"div\", 8);\n        i0.ɵɵelementStart(63, \"h5\", 9);\n        i0.ɵɵtext(64, \"Revenue Today\");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(65, \"div\", 10);\n        i0.ɵɵelementStart(66, \"div\", 11);\n        i0.ɵɵelementStart(67, \"h2\", 12);\n        i0.ɵɵtext(68, \" $11.61k \");\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(69, \"div\", 13);\n        i0.ɵɵelementStart(70, \"span\");\n        i0.ɵɵtext(71, \"2.5% \");\n        i0.ɵɵelement(72, \"i\", 14);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementStart(73, \"div\", 15);\n        i0.ɵɵelement(74, \"div\", 16);\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n        i0.ɵɵelementEnd();\n      }\n    },\n    styles: [\"\"]\n  });\n  return AppComponent;\n})();","map":null,"metadata":{},"sourceType":"module"}